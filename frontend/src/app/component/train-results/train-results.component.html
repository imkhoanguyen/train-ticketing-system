<div class="bg">
  <div class="container py-5">
    <div class="row">
      <!-- Main Content -->
      <div class="col-lg-8">
        <div class="row gx-4 gy-4">
          <div class="col-md-4" *ngFor="let train of trains" (click)="trainDetail(train.id)">
            <div class="card h-100">
              <img [src]="train.pictureUrl" alt="{{ train }}" class="card-img-top" />
              <div class="card-body">
                <h5 class="card-title">{{ train.name }}</h5>
                <p class="card-text">Mô tả: {{ train.description }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4">
        <div class="cart-container shadow-sm p-4">
          <h5 class="cart-title mb-3">Giỏ vé</h5>
          <div class="cart-content">
            @if(selectedSeatIds.length <= 0){
              <p>Chưa có vé được chọn</p>
            }
            @else{
              <li *ngFor="let seatIndex of selectedSeatIds">
                Ghế:  {{seatIndex }} {{ countdownTimes[seatIndex] }}
                <i class="pi pi-trash" (click)="removeSeat(seatIndex)"></i>
              </li>
              <button class="btn btn-primary btn-block" (click)="onSubmit()">Đặt vé</button>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<p-dialog header="Chi tiết tàu" [modal]="true" [(visible)]="isVisible" [style]="{ width: '70rem' }"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
  <div class="container mt-3">
    <div class="train-stats mt-3 p-3">
      <div class="row align-items-stretch">
        <div class="col-4">
          <div class="image-container">
            <div class="overlay">
              <p><i class="pi pi-tag"></i> Tên: <strong>SE1</strong></p>
              <p><i class="pi pi-info-circle"></i> Mô tả: <strong>Xe lửa chất lượng cao</strong></p>
            </div>
            <img alt="Train image"
              src="https://storage.googleapis.com/a1aa/image/mPsqmRo2FjbYHhskIedyRYEVNs1QA1ikZfhyJCNic2MTlhmTA.jpg"
              class="train-image" />
          </div>
        </div>
        <div class="col-8">
          <div class="row">
            <div class="col-12 booking-card">
              <p>
                <i class="pi pi-clock"></i><strong>Thời gian đi:</strong> 14/10 7:00
              </p>
              <p>
                <i class="pi pi-map-marker"></i><strong>Thời gian đến:</strong> 15/10 11:00
              </p>
              <p>
                <i class="pi pi-ticket"></i><strong>Số lượng chỗ đặt:</strong> 103
              </p>
              <p>
                <i class="pi pi-ticket"></i><strong>Số lượng chỗ trống:</strong> 103
              </p>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="carriage">
      <div class="col-sm-12 et-no-margin row">
        <div class="et-car-block col" *ngFor="let carriage of carriages.slice().reverse()"
          [pTooltip]="carriage.description" tooltipPosition="top" (click)="selectCarriage(carriage.id)">
          <div class="et-carriage">
            <div class="et-car-icon" [ngClass]="{

              'et-car-icon-selected': carriage.id === selectedCarriageId

            }" >
            <img src="https://dsvn.vn/images/trainCar2.png" />

            </div>
          </div>
          <div class="et-carriage-header">
            <span>{{ carriage.name }}</span>
          </div>

        </div>
      </div>
      <div class="col">
        <img src="https://dsvn.vn/images/train2.png" height="50px" />
      </div>
    </div>
  </div>
  <div class="seats-card">
    <div *ngFor="let seat of seats; let i = index" class="seat" [pTooltip]="seat.price.toString()" tooltipPosition="top" (click)="toggleSeatSelection(seat.id)"
      [ngClass]="{
        'seat-selected': selectedSeatIds.includes(seat.id)
      }" >
      {{ i + 1 }}
    </div>
  </div>
  <div class="action-buttons mt-3">
    <button class="cancel-btn" (click)="removeSeatAll()">Hủy chọn</button>
    <button class="submit-btn" (click)="closeDialog()">Đóng</button>
  </div>

</p-dialog>
