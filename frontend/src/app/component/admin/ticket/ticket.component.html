<!-- <div class="container">
  <div class="header-container">
      <button pButton 
          label="Quay lại" 
          icon="pi pi-arrow-left" 
          class="p-button-success mb-2 back-button" 
          [routerLink]="['/admin/order']" 
          routerLinkActive="active">
      </button>
      <h2 class="ticket-title">Danh sách vé đã mua</h2>
  </div>

  <div class="button-container">
    <button pButton label="Xuất PDF" icon="pi pi-file-pdf" class="p-button-danger mb-2" (click)="exportPdf()" [disabled]="!tickets.length">
    </button>
  
      <div class="search-container">
          <i class="pi pi-search search-icon"></i>
          <input 
              type="text" 
              pInputText 
              [(ngModel)]="searchQuery" 
              placeholder="Tìm kiếm tên,ga,mã vé,cccd" />
      </div>
  </div>

  <p-table 
      [value]="filteredTickets" 
      [paginator]="true" 
      [rows]="5" 
      responsiveLayout="scroll" 
      class="custom-table">
      <ng-template pTemplate="header">
          <tr>
              <th pSortableColumn="id">
                  Mã vé <p-sortIcon field="id"></p-sortIcon>
              </th>
              <th pSortableColumn="dateBuy">
                  Ngày mua <p-sortIcon field="dateBuy"></p-sortIcon>
              </th>
              <th>Thông tin người dùng</th>
              <th  pSortableColumn="startDate">Ga bắt đầu<p-sortIcon field="startDate"></p-sortIcon></th>
              <th pSortableColumn="endDate">Ga kết thúc<p-sortIcon field="endDate"></p-sortIcon></th>
              <th>Giá tiền</th>
              <th>Trạng thái</th>
              <th>Hành động</th>
          </tr>
      </ng-template>

      <ng-template pTemplate="body" let-ticket let-i="index">
          <tr [ngClass]="{'even-row': i % 2 === 0, 'odd-row': i % 2 !== 0}">
              <td>{{ ticket.id }}</td>
              <td>{{ ticket.dateBuy | date: 'HH:mm - dd/MM/yyyy':'UTC+14' }}</td>
              <td>
                  <div><strong>Tên:</strong><br> {{ ticket.fullname }}</div>
                  <div><strong>Đối tượng:</strong><br> {{ ticket.object }}</div>
                  <div><strong>Căn cước:</strong> <br>{{ ticket.can_cuoc }}</div>
              </td>
              <td>
                  <div><strong>Ga bắt đầu:</strong><br>{{ ticket.startStation }}</div>
                  <div><strong>Thời gian bắt đầu:</strong><br>{{ ticket.startDate | date: 'HH:mm - dd/MM/yyyy':'UTC+14' }}</div>
              </td>
              <td>
                  <div><strong>Ga kết thúc:</strong><br>{{ ticket.endStation }}</div>
                  <div><strong>Thời gian kết thúc:</strong><br>{{ ticket.endDate | date: 'HH:mm - dd/MM/yyyy':'UTC+14' }}</div>
              </td>
              <td>
                  <div><strong>Khuyến mãi:</strong> <br>{{ ticket.promotionName }}</div>
                  <div><strong>Giá gốc:</strong> <br>{{ ticket.price }}</div>
                  <div><strong>Giá giảm:</strong> <br>{{ ticket.price_reduced }}</div>
              </td>
              <td>{{ ticket.status }}</td>
              <td><button pButton icon="pi pi-file-pdf" class="p-button-rounded p-button-info mr-2" (click)="exportPdf1Ticket(ticket.id)"></button></td>
              
          </tr>
      </ng-template>
  </p-table>
</div> -->

<div class="container">
    <div class="header-container">
      <button 
        pButton label="Quay lại" icon="pi pi-arrow-left" 
        class="p-button-success mb-2 back-button" 
        [routerLink]="['/admin/order']" routerLinkActive="active">
      </button>
      <h2 class="ticket-title">Danh sách vé đã mua</h2>
    </div>
  
    <div class="button-search-container">
      <div class="search-container">
        <i class="pi pi-search search-icon"></i>
        <input 
          type="text" pInputText [(ngModel)]="searchQuery" 
          placeholder="Tìm kiếm tên,ga,mã vé,cccd" />
      </div>
  
      <button 
        pButton label="Xuất PDF" icon="pi pi-file-pdf" 
        class="p-button-danger export-button" 
        (click)="exportPdf()" [disabled]="!tickets.length">
      </button>
    </div>
  
    <p-table 
      [value]="filteredTickets" 
      [paginator]="true" [rows]="5" 
      responsiveLayout="scroll" class="custom-table">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="id">Mã vé <p-sortIcon field="id"></p-sortIcon></th>
          <th pSortableColumn="dateBuy">Ngày mua <p-sortIcon field="dateBuy"></p-sortIcon></th>
          <th>Thông tin người dùng</th>
          <th pSortableColumn="startDate">Ga bắt đầu<p-sortIcon field="startDate"></p-sortIcon></th>
          <th pSortableColumn="endDate">Ga kết thúc<p-sortIcon field="endDate"></p-sortIcon></th>
          <th>Giá tiền</th>
          <th>Trạng thái</th>
          <th>Hành động</th>
        </tr>
      </ng-template>
  
      <ng-template pTemplate="body" let-ticket let-i="index">
        <tr [ngClass]="{'even-row': i % 2 === 0, 'odd-row': i % 2 !== 0}">
          <td>{{ ticket.id }}</td>
          <td>{{ ticket.dateBuy | date: 'HH:mm - dd/MM/yyyy':'UTC+14' }}</td>
          <td>
            <div><strong>Tên:</strong><br>{{ ticket.fullname }}</div>
            <div><strong>Đối tượng:</strong><br>{{ ticket.object }}</div>
            <div><strong>Căn cước:</strong><br>{{ ticket.can_cuoc }}</div>
          </td>
          <td>
            <div><strong>Ga bắt đầu:</strong><br>{{ ticket.startStation }}</div>
            <div><strong>Thời gian bắt đầu:</strong><br>{{ ticket.startDate | date: 'HH:mm - dd/MM/yyyy':'UTC+14' }}</div>
          </td>
          <td>
            <div><strong>Ga kết thúc:</strong><br>{{ ticket.endStation }}</div>
            <div><strong>Thời gian kết thúc:</strong><br>{{ ticket.endDate | date: 'HH:mm - dd/MM/yyyy':'UTC+14' }}</div>
          </td>
          <td>
            <div><strong>Khuyến mãi:</strong><br>{{ ticket.promotionName }}</div>
            <div><strong>Giá gốc:</strong><br>{{ ticket.price }}</div>
            <div><strong>Giá giảm:</strong><br>{{ ticket.price_reduced }}</div>
          </td>
          <td>{{ ticket.status }}</td>
          <td>
            <button 
              pButton icon="pi pi-file-pdf" 
              class="p-button-rounded p-button-info mr-2" 
              (click)="exportPdf1Ticket(ticket.id)">
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  